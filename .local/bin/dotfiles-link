#/usr/bin bash

set -e

# Link OS-specific files
for file in $(find $HOME -name *.$(uname -s)); do
  link=$(basename $file .$(uname -s))
  dir=$(dirname $file)
  cd $dir
  ln -sf $(basename $file) $link
done

# Link environment-specific files
env=local
if [[ -n "$SSH_CLIENT" ]] || [[ -n "$SSH_TTY" ]]; then
  env=remote
fi
cd $HOME
ln -sf .bashrc.$env .bashrc
